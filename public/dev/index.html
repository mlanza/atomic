<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Reactives (Development)</title>
  <meta name="description" content="Entities">
  <meta name="author" content="Mario T. Lanza">
  <script src="../assets/vendor/require.js"></script>
  <script src="../assets/boot.js"></script>
  <script type="text/javascript">
    define('context', function(){
      return {};
    });
    /*require(["atomic", "../assets/ents"], function(atomic, ents){ //repl use
      Object.assign(window, atomic, {ents: ents});
    });*/
    require(['atomic/core', 'atomic/dom', 'atomic/reactives', 'atomic/transducers'], function(_, dom, $, t){
      function getNumber(girl){
        return Promise.resolve("867-5309");
      }

      const button = dom.tag('button'),
            input = dom.tag('input', {type: 'text'}),
            btn = button("Click Me", {id: "click-me"}),
            text = input({id: "text"}),
            clicked = $.seed(_.constantly(0), $.pipe($.click(btn), t.constantly(1), t.scan(_.add, 0)));
            entered = $.interact("input change", dom.value, text),
            amanda = $.seed($.andThen(getNumber, $.always("Amanda"))),
            rosanna = $.then(getNumber, $.fixed("Rosanna"));

      dom.append(document.body, text, btn);

      const amandac = _.doto($.cell([]), _.pipe($.collect, $.sub(amanda, _))),
            rosannac = _.doto($.cell([]), _.pipe($.collect, $.sub(rosanna, _)));

      $.sub(entered, _.see('entered'));
      $.sub(clicked, _.see("clicked"));

      Object.assign(window, {amandac, rosannac, text, btn, entered, clicked});
    });
  </script>
</head>
<body id="outline">
</body>
</html>